---
interface Props {
  title: string;
}
const { title } = Astro.props;
---

<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4/dist/chart.umd.min.js"></script>
    <style is:global>
      :root {
        --bg: #0f1114;
        --surface: #1a1d23;
        --surface2: #22262e;
        --border: #2d3139;
        --text: #c9d1d9;
        --text-muted: #6e7681;
        --accent: #4a9eff;
        --accent-dim: #264166;
        --positive: #2ea043;
        --negative: #da3633;
        --warning: #d29922;

        --diff-spb: #66bb6a;
        --diff-spn: #42a5f5;
        --diff-sph: #ffa726;
        --diff-spa: #ef5350;
        --diff-spl: #ab47bc;

        --heatmap-color: 74, 158, 255;

        --radius: 6px;
      }

      *, *::before, *::after { box-sizing: border-box; }

      body {
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans JP', sans-serif;
        background: var(--bg);
        color: var(--text);
        line-height: 1.6;
        -webkit-font-smoothing: antialiased;
      }

      /* ── Header ── */
      header {
        padding: 1.5rem 1rem;
        border-bottom: 1px solid var(--border);
        background: var(--surface);
      }
      header .inner {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        align-items: baseline;
        gap: 1rem;
      }
      header h1 {
        font-size: 1.3rem;
        font-weight: 700;
        letter-spacing: 0.02em;
        color: var(--text);
        margin: 0;
      }
      header h1 span { color: var(--accent); }
      header p {
        font-size: 0.8rem;
        color: var(--text-muted);
        margin: 0;
      }

      /* ── Main ── */
      main {
        max-width: 1200px;
        margin: 0 auto;
        padding: 1.5rem 1rem 3rem;
      }

      section { margin-bottom: 2rem; }

      h2 {
        font-size: 0.85rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.06em;
        color: var(--text-muted);
        margin: 0 0 0.75rem;
        padding-bottom: 0.4rem;
        border-bottom: 1px solid var(--border);
      }

      /* ── Input Section ── */
      .input-section {
        background: var(--surface);
        padding: 1.25rem;
        border-radius: var(--radius);
        border: 1px solid var(--border);
      }
      .input-section p {
        font-size: 0.82rem;
        color: var(--text-muted);
        margin: 0 0 0.75rem;
      }
      .input-section a {
        color: var(--accent);
        text-decoration: none;
      }
      .input-section a:hover { text-decoration: underline; }

      textarea {
        display: block;
        width: 100%;
        padding: 0.6rem 0.75rem;
        background: var(--bg);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        color: var(--text);
        font-family: 'SF Mono', 'Fira Code', 'Consolas', monospace;
        font-size: 0.8rem;
        resize: vertical;
        outline: none;
        transition: border-color 0.15s;
      }
      textarea:focus { border-color: var(--accent); }

      button {
        display: inline-block;
        margin-top: 0.75rem;
        padding: 0.5rem 1.5rem;
        background: var(--accent);
        color: #fff;
        border: none;
        border-radius: var(--radius);
        font-size: 0.85rem;
        font-weight: 600;
        cursor: pointer;
        transition: background 0.15s;
      }
      button:hover { background: #5daaff; }
      button:disabled { opacity: 0.4; cursor: not-allowed; }

      /* ── Tables ── */
      table {
        width: 100%;
        border-collapse: collapse;
        font-size: 0.8rem;
        font-variant-numeric: tabular-nums;
      }
      thead { position: sticky; top: 0; z-index: 1; }
      th {
        padding: 0.5rem 0.6rem;
        background: var(--surface2);
        color: var(--text-muted);
        font-weight: 600;
        font-size: 0.72rem;
        text-transform: uppercase;
        letter-spacing: 0.04em;
        text-align: center;
        border-bottom: 2px solid var(--border);
        white-space: nowrap;
      }
      td {
        padding: 0.4rem 0.6rem;
        text-align: center;
        border-bottom: 1px solid var(--border);
        white-space: nowrap;
      }
      tbody tr { transition: background 0.1s; }
      tbody tr:hover { background: var(--surface); }

      /* ── Heatmap statistics table ── */
      .stats-table td {
        text-align: center;
      }
      .stats-table td:first-child {
        text-align: left;
        font-weight: 600;
      }
      .stats-table td:nth-child(2) {
        text-align: center;
      }
      .stats-table td:nth-child(3) {
        text-align: right;
        font-variant-numeric: tabular-nums;
      }

      /* ── Song list table ── */
      .song-table td:nth-child(3) {
        text-align: left;
        max-width: 280px;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      /* ── Difficulty ── */
      .diff { font-weight: 700; font-size: 0.75rem; }
      .diff-spb { color: var(--diff-spb); }
      .diff-spn { color: var(--diff-spn); }
      .diff-sph { color: var(--diff-sph); }
      .diff-spa { color: var(--diff-spa); }
      .diff-spl { color: var(--diff-spl); }

      /* ── Clear Lamps ── */
      .clear-fc {
        background: linear-gradient(90deg, #ef5350, #ffa726, #42a5f5, #ab47bc);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        font-weight: 700;
        font-size: 0.72rem;
      }
      .clear-exh { color: var(--warning); font-size: 0.72rem; }
      .clear-hard { color: #e6edf3; font-weight: 600; font-size: 0.72rem; }
      .clear-normal { color: var(--accent); font-size: 0.72rem; }
      .clear-easy { color: var(--positive); font-size: 0.72rem; }
      .clear-assist { color: var(--diff-spl); font-size: 0.72rem; }
      .clear-failed { color: var(--negative); font-size: 0.72rem; }
      .clear-noplay { color: var(--text-muted); font-size: 0.72rem; }

      /* ── BPI ── */
      .bpi-top { color: #ef5350; font-weight: 700; }
      .bpi-high { color: #ffa726; font-weight: 600; }
      .bpi-mid { color: #42a5f5; }
      .bpi-low { color: var(--positive); }
      .bpi-negative { color: var(--text-muted); }

      /* ── Diff colors ── */
      .positive { color: var(--positive); }
      .negative { color: var(--negative); }

      /* ── Summary Card ── */
      .summary-card {
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 1.25rem;
        margin-bottom: 1.25rem;
      }
      .summary-card h3 {
        font-size: 0.9rem;
        font-weight: 600;
        margin: 0 0 1rem;
        color: var(--text);
      }
      .summary-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        gap: 1rem;
        margin-bottom: 1rem;
      }
      .stat {
        display: flex;
        flex-direction: column;
        gap: 0.15rem;
      }
      .stat-label {
        font-size: 0.7rem;
        text-transform: uppercase;
        letter-spacing: 0.04em;
        color: var(--text-muted);
      }
      .stat-value {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--accent);
        font-variant-numeric: tabular-nums;
      }

      /* ── Options row ── */
      .options-row {
        display: flex;
        gap: 1rem;
        align-items: center;
        margin-top: 0.75rem;
        font-size: 0.82rem;
        color: var(--text-muted);
      }
      .options-row label {
        display: flex;
        align-items: center;
        gap: 0.3rem;
        cursor: pointer;
      }
      .options-row select {
        padding: 0.3rem 0.5rem;
        background: var(--bg);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        color: var(--text);
        font-size: 0.8rem;
        outline: none;
        cursor: pointer;
      }

      /* ── Scroll container ── */
      .scroll-x {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
      }

      /* ── Collapsible sections ── */
      details summary {
        cursor: pointer;
        list-style: none;
        user-select: none;
      }
      details summary::-webkit-details-marker {
        display: none;
      }
      details summary h2 {
        margin-bottom: 0;
        border-bottom: none;
        padding-bottom: 0;
      }
      details summary h2::before {
        content: '\25B6';
        display: inline-block;
        margin-right: 0.5rem;
        font-size: 0.75em;
        transition: transform 0.2s;
      }
      details[open] summary h2 {
        margin-bottom: 0.75rem;
        border-bottom: 1px solid var(--border);
        padding-bottom: 0.4rem;
      }
      details[open] summary h2::before {
        transform: rotate(90deg);
      }

      /* ── History Section ── */
      .history-list {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }
      .history-item {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.6rem 0.75rem;
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        cursor: pointer;
        transition: background 0.15s, border-color 0.15s;
      }
      .history-item:hover {
        background: var(--surface2);
        border-color: var(--accent);
      }
      .history-item.active {
        border-color: var(--accent);
        background: var(--accent-dim);
      }
      .history-date {
        font-size: 0.8rem;
        font-weight: 600;
        color: var(--accent);
        white-space: nowrap;
      }
      .history-info {
        flex: 1;
        font-size: 0.78rem;
        color: var(--text-muted);
      }
      .history-info strong {
        color: var(--text);
      }
      .history-delete {
        padding: 0.2rem 0.5rem;
        background: transparent;
        border: 1px solid var(--border);
        border-radius: var(--radius);
        color: var(--negative);
        font-size: 0.7rem;
        cursor: pointer;
        margin: 0;
      }
      .history-delete:hover {
        background: var(--negative);
        color: #fff;
        border-color: var(--negative);
      }
      .history-empty {
        font-size: 0.8rem;
        color: var(--text-muted);
        padding: 1rem 0;
      }

      /* ── Chart Container ── */
      .chart-container {
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 1rem;
        margin-bottom: 1.5rem;
      }
      .chart-container h3 {
        font-size: 0.8rem;
        font-weight: 600;
        color: var(--text-muted);
        margin: 0 0 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.04em;
      }
      .chart-canvas-wrap {
        position: relative;
        height: 250px;
      }

      /* ── Tweet button ── */
      .tweet-link {
        display: inline-block;
        padding: 0.4rem 1rem;
        background: var(--surface2);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        font-size: 0.8rem;
        color: var(--accent);
        text-decoration: none;
        transition: border-color 0.15s;
      }
      .tweet-link:hover {
        border-color: var(--accent);
        text-decoration: none;
      }

      /* ── Ability Gauges ── */
      .ability-gauges {
        display: flex;
        flex-direction: column;
        gap: 1.25rem;
      }
      .ability-gauge {
        display: flex;
        flex-direction: column;
        gap: 0.3rem;
      }
      .ability-header {
        display: flex;
        justify-content: space-between;
        align-items: baseline;
      }
      .ability-name {
        font-size: 0.85rem;
        font-weight: 600;
        color: var(--text);
      }
      .ability-value {
        font-size: 1.3rem;
        font-weight: 700;
        color: var(--accent);
        font-variant-numeric: tabular-nums;
      }
      .ability-bar-bg {
        height: 8px;
        background: var(--surface2);
        border-radius: 4px;
        overflow: hidden;
      }
      .ability-bar-fill {
        height: 100%;
        border-radius: 4px;
        background: linear-gradient(90deg, var(--accent-dim), var(--accent));
        transition: width 0.6s ease-out;
      }
      .ability-desc {
        font-size: 0.7rem;
        color: var(--text-muted);
      }

      /* ── Misc ── */
      a { color: var(--accent); text-decoration: none; }
      a:hover { text-decoration: underline; }

      ::selection { background: var(--accent-dim); }
    </style>
  </head>
  <body>
    <slot />
  </body>
</html>
